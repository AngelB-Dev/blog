---
import FormattedDate from './FormattedDate.astro';

export interface Props {
  post: {
    slug: string;
    data: {
      title: string;
      technology?: string;
      heroImage: string;
      pubDate: Date;
    };
  };
  index: number;
}

const { post, index } = Astro.props;
const slug = post.slug.split('/').filter(segment => segment !== '').join('/');
const isFirst = index === 0;
---

<li id={`post-${index}`} 
    class={isFirst ? 'first-post' : ''}
    data-title={post.data.title?.toLowerCase() ?? ''} 
    data-technology={post.data.technology?.toLowerCase() ?? ''}
    aria-label={`ArtÃ­culo: ${post.data.title}`}>
  <a href={`/blog/${slug}/`}>
    <img 
      width={720} 
      height={360} 
      src={post.data.heroImage} 
      alt={post.data.title}
      loading={index > 0 ? "lazy" : "eager"}
      decoding="async"
    />
    <h4 class="title">{post.data.title}</h4>
    <p class="date">
      <FormattedDate date={post.data.pubDate} />
    </p>
  </a>
</li>

<style>
    li {
        width: calc(50% - 1rem);

    }
    li * {
        text-decoration: none;
        transition: 0.2s ease;
    }
    li.first-post {
        width: 100%;
        margin-bottom: 2rem;
    }
    li.first-post img {
        width: 100%;
        height: 500px;
        object-fit: cover;
    }
    li.first-post .title {
        font-size: 2.369rem;
    }
    li img {
        width: 100%;
        height: 260px;
        object-fit: cover;
        margin-bottom: 0.4rem;
        border-radius: 12px;
    }
    li a {
        display: block;
    }
    .title {
        margin: 0;
        color: rgb(var(--black));
        line-height: 1.2;
    }
    .date {
        margin: 0;
        color: rgb(var(--gray));
    }
    a:hover h4,
    a:hover .date {
        color: rgb(var(--accent));
    }
    a:hover img {
        box-shadow: var(--box-shadow);
    }
    @media (max-width: 720px) {
        li {
            width: 100%;
        }
        li.first-post {
            margin-bottom: 2rem;
        }
        li.first-post .title {
            font-size: 1.777rem;
        }
        li img {
            height: 250px;
        }
    }
</style>